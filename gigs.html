---
title: Gigs
---

<a
  href='/calendar.ics'
  class='btn btn-info cal-subscribe'
  data-toggle='tooltip'
  data-placement='bottom'
  title='Add our gig schedule to your calendar'>
  Gig calendar
</a>

<h2>Upcoming</h2>
<dl
  id='giglist'
  class='row'></dl>

<h2>Archive</h2>
<div
  id='archive-links'
  class='text-center'></div>
<div id='archive'></div>

<script>
nothingPlanned = true
$.getJSON('/gigs.json', function(data) {
  $.each(data.gigs, function(index, gig) {
    date = fancyDate(gig.date)

    dt = '<dt class="col-6">' + date + '</dt>'
    dd = '<dd class="col-6"><a href="' + gig.url + '">' + gig.title + '</a></dd>'

    if (isFuture(gig.date)) {
      nothingPlanned = false
      dt = '<dt class="col-6">' + date + '</dt>'
      dd = '<dd class="col-6"><a href="' + gig.url + '">' + gig.title + '</a></dd>'
      $('#giglist').append(dt + dd)
    } else {
      year = moment(gig.date).format('YYYY')
      arch = 'archive-' + year
      if (! $('#' + arch).length) {
        $('#archive-links').append(yearLink(year))
        $('#archive').append(yearModal(year))
      }
      $('#' + arch).append(gigLink(gig))
    }

  })

  if (nothingPlanned) {
    $(`<p class="text-center">
      Nothing in the calendar. Why not
      <a href="/book-the-band/">book us?</a></p>
    `).insertBefore('#giglist')
  }
})

function yearLink(year) {
  return `
  <a
    href='#'
    data-toggle='modal'
    data-target='#archive-${ year }-modal'>
      ${ year }
    </a>
  `
}

function yearModal(year) {
  return `
  <div
    class="modal fade"
    id="archive-${ year }-modal"
    tabindex="-1"
    role="dialog"
    aria-hidden="true">
    <div
      class="modal-dialog"
      role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h2 class='modal-title'>${ year } gigs</h2>
        </div>
        <div class="modal-body row" id='archive-${ year }'>
        </div>
        <div class="modal-footer">
        <button
          type="button"
          class="btn btn-info"
          data-dismiss="modal">
          Close
        </button>
      </div>
    </div>
  </div>
  `
}

function gigLink(gig) {
  return `
  <div class='col-xs col-md'>
    <div class='card'>
      <h4>${ date }</h4>
      <h3>
        <a href="${ gig.url }">
          ${ gig.title }
        </a>
      </h3>
    </div>
  </div>
  `
}
</script>
